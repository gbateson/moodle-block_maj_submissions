define([],function(){var a={};return a.character="(?:[\\0-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF])",a.singlechars=new RegExp(a.character,"g"),a.strlen=function(b){b=b||"";var c=b.match(a.singlechars)||[];return c.length},a.substr=function(b,c,d){if(""==b||0==d)return"";var e=a.strlen(b);if(c>0&&c>e)return"";switch(!0){case c>0:var f=new RegExp("^"+a.character+"{"+c+"}(.*)$");b=b.replace(f,"$1"),e-=c;break;case c<0&&Math.abs(c)<e:var f=new RegExp("^(.*)"+a.character+"{"+Math.abs(c)+"}$");b=b.replace(f,"$1"),e+=c}if(d<0&&Math.abs(d)>e)return"";switch(!0){case d>0&&d<e:var f=new RegExp("^("+a.character+"{"+d+"}).*$");b=b.replace(f,"$1"),e=d;break;case d<0:var f=new RegExp("^(.*)"+a.character+"{"+Math.abs(d)+"}$");b=b.replace(f,"$1"),e=d}return b},a.shorten=function(b,c,d,e,f,g){if(void 0!==c&&null!==c||(c=28),void 0!==d&&null!==d||(d=14),void 0!==e&&null!==e||(e=10),void 0!==f&&null!==f||(f=" ... "),g){var h=new RegExp("( |\\t|\\r|\\n|(<br\\b[^>]*>))+","g");b=b.replace(h," ")}if(c&&(d||e)){var i=a.strlen(b);if(i>c){var j=a.substr(b,0,d),k=a.substr(b,i-e,e);b=j+f+k}}return b},a});